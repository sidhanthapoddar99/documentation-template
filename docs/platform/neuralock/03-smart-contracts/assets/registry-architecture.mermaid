graph TB
    subgraph "Registry Contract Architecture"
        subgraph "Core Contract"
            Registry[NeuralockRegistry.sol<br/>ERC721 NFT]
            AccessControl[NeuralockAccessControl.sol<br/>Role Management]
            Metadata[NeuralockMetadata.sol<br/>URI Generation]
        end
        
        subgraph "State Management"
            ServerData[(Server Metadata<br/>Mapping)]
            RoleData[(Role Assignments<br/>Mapping)]
            VerificationData[(Verification Requests<br/>Mapping)]
            KeyMapping[(Server Key â†’ Token ID<br/>Mapping)]
        end
        
        subgraph "Interfaces"
            IRegistry[INeuralockRegistry]
            IMetadata[INeuralockMetadata]
            IERC721[IERC721]
        end
        
        subgraph "Libraries"
            Constants[NeuralockConstants<br/>Protocol Constants]
            Errors[NeuralockErrors<br/>Custom Errors]
        end
    end
    
    subgraph "External Interactions"
        Owner[Contract Owner]
        Admin[Administrators]
        Manager[Managers]
        ServerOp[Server Operators]
        Applications[Application Contracts]
    end
    
    %% Core relationships
    Registry --> AccessControl
    Registry --> Metadata
    Registry --> ServerData
    Registry --> KeyMapping
    AccessControl --> RoleData
    Registry --> VerificationData
    
    %% Interface implementations
    Registry -.-> IRegistry
    Registry -.-> IERC721
    Metadata -.-> IMetadata
    
    %% Library usage
    Registry --> Constants
    Registry --> Errors
    AccessControl --> Errors
    
    %% External interactions
    Owner --> Registry
    Admin --> Registry
    Manager --> Registry
    ServerOp --> Registry
    Applications --> IRegistry
    
    %% Styling
    style Registry fill:#e1f5e1,stroke:#4caf50,stroke-width:3px
    style AccessControl fill:#e1f5e1,stroke:#4caf50,stroke-width:2px
    style Metadata fill:#e1f5e1,stroke:#4caf50,stroke-width:2px
    style ServerData fill:#ffe1e1,stroke:#f44336,stroke-width:2px
    style RoleData fill:#ffe1e1,stroke:#f44336,stroke-width:2px
    style VerificationData fill:#ffe1e1,stroke:#f44336,stroke-width:2px
    style Owner fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    style Admin fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    style Manager fill:#fff3e0,stroke:#ff9800,stroke-width:2px