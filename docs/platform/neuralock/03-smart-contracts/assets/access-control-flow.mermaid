sequenceDiagram
    participant O as Owner
    participant A as Admin
    participant M as Manager
    participant AC as AccessControl Contract
    participant E as Events
    
    Note over O,E: Role Assignment Flow
    
    rect rgb(255, 235, 238)
        Note over O,AC: Adding an Admin
        O->>AC: addAdmin(newAdmin)
        AC->>AC: Check msg.sender is Owner
        AC->>AC: Validate newAdmin address
        AC->>AC: Update roles mapping
        AC->>AC: Increment totalAdmins
        AC->>E: Emit AdminAdded(newAdmin, owner)
        AC-->>O: Success
    end
    
    rect rgb(232, 245, 233)
        Note over A,AC: Adding a Manager
        A->>AC: addManager(newManager)
        AC->>AC: Check msg.sender is Admin/Owner
        AC->>AC: Validate newManager address
        AC->>AC: Update roles mapping
        AC->>AC: Increment totalManagers
        AC->>E: Emit ManagerAdded(newManager, admin)
        AC-->>A: Success
    end
    
    rect rgb(232, 240, 254)
        Note over M,AC: Manager Operations
        M->>AC: approveMetadataUpdate(requestId)
        AC->>AC: Check hasRole(msg.sender, MANAGER)
        alt Has Manager Role
            AC->>AC: Process approval
            AC->>E: Emit MetadataUpdateApproved
            AC-->>M: Approval recorded
        else No Manager Role
            AC-->>M: Revert: Not a manager
        end
    end
    
    rect rgb(255, 243, 224)
        Note over O,AC: Role Revocation
        O->>AC: removeAdmin(existingAdmin)
        AC->>AC: Check msg.sender is Owner
        AC->>AC: Check existingAdmin has role
        AC->>AC: Clear admin role
        AC->>AC: Decrement totalAdmins
        AC->>E: Emit AdminRemoved(existingAdmin, owner)
        AC-->>O: Success
    end
    
    rect rgb(255, 235, 238)
        Note over O,AC: Emergency Controls
        O->>AC: pause()
        AC->>AC: Check msg.sender is Owner
        AC->>AC: Set paused = true
        AC->>E: Emit Paused(owner)
        AC-->>O: Contract paused
        
        Note over AC: All non-owner functions blocked
        
        M->>AC: mintServer(...)
        AC->>AC: Check whenNotPaused
        AC-->>M: Revert: Contract is paused
        
        O->>AC: unpause()
        AC->>AC: Check msg.sender is Owner
        AC->>AC: Set paused = false
        AC->>E: Emit Unpaused(owner)
        AC-->>O: Contract unpaused
    end