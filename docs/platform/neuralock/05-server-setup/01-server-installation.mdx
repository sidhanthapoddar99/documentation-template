---
id: server-installation
title: Server Installation
description: Complete guide to installing and deploying Neuralock server nodes
sidebar_position: 1
---

import { Card, CardHeader, CardTitle } from "@site/src/components/elements";
import { Callout } from "@site/src/components/elements";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { FileCollapsibleCodeBlock } from "@site/src/components/elements/CodeBlock";
import { MermaidDiagram } from '@site/src/components/elements';
import DockerCompose from '!!raw-loader!./assets/docker-compose.yml';
import Dockerfile from '!!raw-loader!./assets/Dockerfile';
import SystemdService from '!!raw-loader!./assets/neuralock.service';
import InstallScript from '!!raw-loader!./assets/install.sh';
import DeploymentArchitecture from '!!raw-loader!./assets/deployment-architecture.mermaid';

# Server Installation

This guide covers the complete installation process for Neuralock server nodes, from system requirements to production deployment.

## System Requirements

<div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1rem', marginBottom: '2rem' }}>
  <Card>
    <CardHeader>
      <CardTitle>üíª Hardware</CardTitle>
    </CardHeader>
    <ul>
      <li>CPU: 1 core minimum (single-threaded design)</li>
      <li>RAM: 2GB minimum, 4GB recommended</li>
      <li>Storage: 20GB SSD for databases</li>
      <li>Network: 100Mbps+ symmetric connection</li>
    </ul>
  </Card>
  
  <Card>
    <CardHeader>
      <CardTitle>üêß Operating System</CardTitle>
    </CardHeader>
    <ul>
      <li>Ubuntu 20.04+ LTS</li>
      <li>Debian 11+</li>
      <li>CentOS 8+/RHEL 8+</li>
      <li>Alpine Linux 3.14+</li>
    </ul>
  </Card>
  
  <Card>
    <CardHeader>
      <CardTitle>üì¶ Dependencies</CardTitle>
    </CardHeader>
    <ul>
      <li>Docker 20.10+ & Docker Compose 2.0+</li>
      <li>Python 3.9+ (for native installation)</li>
      <li>Redis 7.0+</li>
      <li>OpenSSL 1.1.1+</li>
    </ul>
  </Card>
</div>

## Installation Methods

<Tabs defaultValue="docker">
  <TabItem value="docker">
    ### Docker Installation

    The recommended installation method uses Docker Compose for easy deployment and management.

    #### 1. Clone the Repository

    ```bash
    git clone https://github.com/neuralabs/neuralock-server.git
    cd neuralock-server
    ```

    #### 2. Configure Environment

    ```bash
    # Copy example configuration
    cp config/config.example.yaml config/config.yaml
    cp .env.example .env

    # Generate cryptographic keys
    python scripts/generate_keys.py --output config/keys.yaml
    ```

    #### 3. Deploy with Docker Compose

    <FileCollapsibleCodeBlock content={DockerCompose} filename="docker-compose.yml" />

    ```bash
    # Start services
    docker-compose up -d

    # View logs
    docker-compose logs -f neuralock-server

    # Check health
    curl http://localhost:8000/api/v1/health
    ```

    <Callout type="success" title="Quick Start">
      For development environments, use the provided `docker-compose.dev.yml` which includes monitoring and debugging tools.
    </Callout>
  </TabItem>

  <TabItem value="native">
    ### Native Installation

    For production environments requiring maximum performance or custom configurations.

    #### 1. Install System Dependencies

    <Tabs defaultValue="ubuntu">
      <TabItem value="ubuntu">
        ```bash
        # Update system
        sudo apt update && sudo apt upgrade -y

        # Install dependencies
        sudo apt install -y python3.9 python3.9-venv python3.9-dev \
          redis-server build-essential libssl-dev libffi-dev \
          git curl wget supervisor nginx

        # Install LevelDB
        sudo apt install -y libleveldb-dev
        ```
      </TabItem>

      <TabItem value="centos">
        ```bash
        # Update system
        sudo yum update -y

        # Install EPEL repository
        sudo yum install -y epel-release

        # Install dependencies
        sudo yum install -y python39 python39-devel redis \
          gcc gcc-c++ openssl-devel git curl wget \
          supervisor nginx

        # Install LevelDB
        sudo yum install -y leveldb-devel
        ```
      </TabItem>
    </Tabs>

    #### 2. Setup Python Environment

    ```bash
    # Create user for service
    sudo useradd -r -s /bin/false neuralock

    # Create directories
    sudo mkdir -p /opt/neuralock/{config,data,logs}
    sudo chown -R neuralock:neuralock /opt/neuralock

    # Setup Python virtual environment
    cd /opt/neuralock
    python3.9 -m venv venv
    source venv/bin/activate

    # Install dependencies
    pip install --upgrade pip
    pip install -r requirements.txt
    ```

    #### 3. Configure Systemd Service

    <FileCollapsibleCodeBlock content={SystemdService} filename="neuralock.service" />

    ```bash
    # Install service
    sudo cp config/neuralock.service /etc/systemd/system/
    sudo systemctl daemon-reload
    sudo systemctl enable neuralock
    sudo systemctl start neuralock
    ```

    #### 4. Automated Installation Script

    <FileCollapsibleCodeBlock content={InstallScript} filename="install.sh" />

    ```bash
    # Run automated installation
    curl -sSL https://install.neuralock.io | bash
    ```
  </TabItem>

  <TabItem value="kubernetes">
    ### Kubernetes Deployment

    For cloud-native deployments with automatic scaling and high availability.

    #### 1. Helm Installation

    ```bash
    # Add Neuralock Helm repository
    helm repo add neuralock https://charts.neuralock.io
    helm repo update

    # Install with default values
    helm install neuralock-server neuralock/server \
      --namespace neuralock \
      --create-namespace

    # Install with custom values
    helm install neuralock-server neuralock/server \
      --namespace neuralock \
      --create-namespace \
      --values custom-values.yaml
    ```

    #### 2. Manual Kubernetes Deployment

    See the [Kubernetes deployment guide](https://github.com/neuralabs/neuralock-server/tree/main/k8s) for detailed manifests.

    <Callout type="info" title="StatefulSet Required">
      Neuralock servers require persistent storage and stable network identities. Always use StatefulSets, not Deployments.
    </Callout>
  </TabItem>
</Tabs>

## Deployment Architecture

<MermaidDiagram content={DeploymentArchitecture} filename="deployment-architecture.mermaid" />

## Post-Installation Steps

### 1. Verify Installation

```bash
# Check service status
systemctl status neuralock  # For systemd
docker-compose ps          # For Docker

# Test API endpoint
curl http://localhost:8000/api/v1/info

# Check logs
journalctl -u neuralock -f  # For systemd
docker-compose logs -f      # For Docker
```

### 2. Initialize Redis

```bash
# Run initialization script
python scripts/init_redis.py \
  --host localhost \
  --port 6379 \
  --password your_redis_password
```

### 3. Generate Server Keys

```bash
# Generate new keypairs
python scripts/generate_keys.py \
  --type server \
  --output config/server_keys.yaml \
  --encrypt-password

# Verify keys
python scripts/verify_keys.py \
  --config config/server_keys.yaml
```

### 4. Configure Firewall

```bash
# Allow Neuralock API port
sudo ufw allow 8000/tcp

# Allow Redis (only if external access needed)
sudo ufw allow from 10.0.0.0/8 to any port 6379

# Enable firewall
sudo ufw enable
```

## Production Considerations

<div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1rem' }}>
  <Card>
    <CardHeader>
      <CardTitle>üîí Security Hardening</CardTitle>
    </CardHeader>
    <ul>
      <li>Run as non-root user</li>
      <li>Enable SELinux/AppArmor</li>
      <li>Use private key encryption</li>
      <li>Implement network segmentation</li>
    </ul>
  </Card>
  
  <Card>
    <CardHeader>
      <CardTitle>üìä Performance Tuning</CardTitle>
    </CardHeader>
    <ul>
      <li>Tune Redis persistence settings</li>
      <li>Configure LevelDB cache size</li>
      <li>Optimize network buffers</li>
      <li>Enable connection pooling</li>
    </ul>
  </Card>
  
  <Card>
    <CardHeader>
      <CardTitle>üîÑ High Availability</CardTitle>
    </CardHeader>
    <ul>
      <li>Deploy behind load balancer</li>
      <li>Configure health checks</li>
      <li>Implement automatic restarts</li>
      <li>Setup monitoring alerts</li>
    </ul>
  </Card>
</div>

## Troubleshooting

### Common Issues

<Callout type="warning" title="Port Already in Use">
  If port 8000 is already in use, modify the port in `config/config.yaml` and restart the service.
</Callout>

<Callout type="error" title="Redis Connection Failed">
  Ensure Redis is running and the password in configuration matches. Check Redis logs for authentication errors.
</Callout>

<Callout type="info" title="LevelDB Lock Error">
  Only one process can access LevelDB at a time. Ensure no other instances are running.
</Callout>

### Debug Commands

```bash
# Check system resources
free -h
df -h
top -n 1

# Test Redis connection
redis-cli -h localhost -p 6379 -a password ping

# Verify Python dependencies
pip list | grep -E "fastapi|redis|web3"

# Check network connectivity
nc -zv localhost 8000
curl -v http://localhost:8000/api/v1/health
```

## Next Steps

- [Configure your server](./02-configuration) with blockchain connections and security settings
- [Review the API reference](./03-api-reference) for integration details
- [Setup monitoring](./04-monitoring) for production deployments