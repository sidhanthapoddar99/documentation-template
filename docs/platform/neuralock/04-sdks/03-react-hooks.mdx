---
title: React Hooks
sidebar_position: 3
description: React hooks for seamless Neuralock integration in React applications
---

import { Card } from '@site/src/components/elements';
import Tabs from "@theme/Tabs";
import { FileCollapsibleCodeBlock } from "@site/src/components/elements/CodeBlock";
import { MermaidDiagram } from '@site/src/components/elements';
import { Callout } from '@site/src/components/elements';
import { Callout as Alert } from "@site/src/components/elements";

import ReactArchitectureSource from '!!raw-loader!./assets/react-architecture.mermaid';
import BasicHookExample from '!!raw-loader!./assets/basic-hook-example.jsx';
import ProviderSetupExample from '!!raw-loader!./assets/provider-setup.jsx';
import SessionHookExample from '!!raw-loader!./assets/session-hook-example.jsx';
import EncryptionFormExample from '!!raw-loader!./assets/encryption-form.jsx';
import PermissionManagerExample from '!!raw-loader!./assets/permission-manager.jsx';
import TypeScriptExample from '!!raw-loader!./assets/typescript-example.tsx';

# React Hooks

The Neuralock React hooks provide a powerful and intuitive way to integrate distributed encryption into your React applications. Built on top of the JavaScript SDK, these hooks handle state management, lifecycle events, and provide a seamless developer experience.

## Overview

Key features:
- **Context-based state management** for global client access
- **Automatic session handling** with built-in refresh
- **Loading and error states** for better UX
- **TypeScript support** with full type definitions
- **SSR compatibility** for Next.js applications
- **Optimistic updates** for better performance

<MermaidDiagram content={ReactArchitectureSource} filename="react-architecture.mermaid" />

## Installation

```bash
npm install @neuralock/react
```

<Callout type="info">
  The React hooks package includes the core JavaScript SDK as a dependency.
</Callout>

## Quick Start

<FileCollapsibleCodeBlock content={BasicHookExample} filename="basic-hook-example.jsx" />

## Provider Setup

First, wrap your application with the `NeuralockProvider`:

<FileCollapsibleCodeBlock content={ProviderSetupExample} filename="provider-setup.jsx" />

## Core Hooks

### useNeuralock

The main hook for encryption and decryption operations.

```typescript
const {
  client,           // NeuralockClient instance
  initialize,       // Initialize function
  encrypt,          // Encrypt function
  decrypt,          // Decrypt function
  isInitialized,    // Boolean state
  isLoading,        // Loading state
  error            // Error object
} = useNeuralock();
```

#### Methods

##### initialize(config?)
Initialize the client with optional config override:

```javascript
await initialize({
  servers: [{ nftId: 1 }, { nftId: 2 }],
  options: { ttl: 600 }
});
```

##### encrypt(data, objectId)
Encrypt data with automatic state management:

```javascript
const encrypted = await encrypt("sensitive data", "doc-123");
```

##### decrypt(encryptedData, objectId)
Decrypt data with automatic error handling:

```javascript
const decrypted = await decrypt(encrypted, "doc-123");
```

### useNeuralockSession

Manage and monitor session state:

<FileCollapsibleCodeBlock content={SessionHookExample} filename="session-hook-example.jsx" />

### useNeuralockPermissions

Manage access control and permissions:

```javascript
const {
  permissions,
  updatePermissions,
  revokeAccess,
  checkPermission,
  isUpdating,
  error
} = useNeuralockPermissions(objectId);

// Check if user has permission
const canRead = await checkPermission(userAddress, 'read');

// Update permissions
await updatePermissions({
  add: { [userAddress]: ['read', 'write'] },
  remove: { [otherAddress]: ['write'] }
});

// Revoke all access
await revokeAccess();
```

### useNeuralockCache

Access and manage the encryption cache:

```javascript
const {
  getCached,
  setCached,
  removeCached,
  clearCache,
  cacheSize
} = useNeuralockCache();

// Check if data is cached
const cached = getCached(objectId);

// Manually cache data
setCached(objectId, decryptedData);

// Clear specific or all cache
removeCached(objectId);
clearCache();
```

## Component Examples

### Encryption Form

A complete form component with encryption:

<FileCollapsibleCodeBlock content={EncryptionFormExample} filename="encryption-form.jsx" />

### Permission Manager

A component for managing object permissions:

<FileCollapsibleCodeBlock content={PermissionManagerExample} filename="permission-manager.jsx" />

## TypeScript Support

The hooks are fully typed for TypeScript projects:

<FileCollapsibleCodeBlock content={TypeScriptExample} filename="typescript-example.tsx" />

## Advanced Usage

### Custom Error Handling

```jsx
function MyComponent() {
  const { encrypt, error } = useNeuralock();
  
  // Custom error boundary
  useEffect(() => {
    if (error) {
      if (error.code === 'SESSION_EXPIRED') {
        // Handle session expiry
        showNotification('Session expired, please reconnect');
      } else if (error.code === 'THRESHOLD_NOT_MET') {
        // Handle server availability
        showNotification('Some servers are unavailable');
      }
    }
  }, [error]);
  
  return (
    // Your component
  );
}
```

### Optimistic Updates

```jsx
function DocumentEditor({ documentId }) {
  const { encrypt, decrypt } = useNeuralock();
  const [content, setContent] = useState('');
  const [saving, setSaving] = useState(false);
  
  const saveDocument = async (newContent) => {
    // Optimistic update
    setContent(newContent);
    setSaving(true);
    
    try {
      // Encrypt and save
      const encrypted = await encrypt(newContent, documentId);
      await saveToDatabase(documentId, encrypted);
      
      showNotification('Document saved');
    } catch (error) {
      // Revert on error
      setContent(content);
      showNotification('Save failed', 'error');
    } finally {
      setSaving(false);
    }
  };
  
  return (
    <Editor
      value={content}
      onChange={saveDocument}
      disabled={saving}
    />
  );
}
```

### Server-Side Rendering (SSR)

For Next.js applications:

```jsx
// pages/_app.js
import { NeuralockProvider } from '@neuralock/react';

function MyApp({ Component, pageProps }) {
  // Skip initialization on server
  const isServer = typeof window === 'undefined';
  
  return (
    <NeuralockProvider
      config={{
        applicationContract: process.env.NEXT_PUBLIC_CONTRACT,
        skipAutoInit: isServer
      }}
    >
      <Component {...pageProps} />
    </NeuralockProvider>
  );
}

// In your component
function MyPage() {
  const { initialize, isInitialized } = useNeuralock();
  
  useEffect(() => {
    if (!isInitialized && typeof window !== 'undefined') {
      initialize();
    }
  }, []);
  
  return (
    // Your content
  );
}
```

### Custom Hooks

Build your own hooks on top of Neuralock:

```jsx
// useEncryptedState.js
export function useEncryptedState(objectId, initialValue = null) {
  const { encrypt, decrypt, isInitialized } = useNeuralock();
  const [value, setValue] = useState(initialValue);
  const [encrypted, setEncrypted] = useState(null);
  const [loading, setLoading] = useState(false);
  
  // Load encrypted value on mount
  useEffect(() => {
    if (isInitialized && objectId) {
      loadEncryptedValue();
    }
  }, [isInitialized, objectId]);
  
  const loadEncryptedValue = async () => {
    setLoading(true);
    try {
      const encryptedData = await fetchFromStorage(objectId);
      if (encryptedData) {
        const decrypted = await decrypt(encryptedData, objectId);
        setValue(decrypted);
        setEncrypted(encryptedData);
      }
    } finally {
      setLoading(false);
    }
  };
  
  const updateValue = async (newValue) => {
    setValue(newValue);
    setLoading(true);
    
    try {
      const newEncrypted = await encrypt(newValue, objectId);
      await saveToStorage(objectId, newEncrypted);
      setEncrypted(newEncrypted);
    } finally {
      setLoading(false);
    }
  };
  
  return [value, updateValue, { loading, encrypted }];
}

// Usage
function SecureNotes() {
  const [notes, setNotes, { loading }] = useEncryptedState('user-notes');
  
  if (loading) return <Spinner />;
  
  return (
    <textarea
      value={notes || ''}
      onChange={(e) => setNotes(e.target.value)}
      placeholder="Your encrypted notes..."
    />
  );
}
```

## Performance Optimization

### Memoization

```jsx
import { useMemo, useCallback } from 'react';

function DocumentList({ documents }) {
  const { decrypt } = useNeuralock();
  
  // Memoize decrypt function
  const memoizedDecrypt = useCallback(
    async (doc) => {
      return await decrypt(doc.encryptedData, doc.id);
    },
    [decrypt]
  );
  
  // Memoize document processing
  const processedDocs = useMemo(
    () => documents.map(doc => ({
      ...doc,
      decrypt: () => memoizedDecrypt(doc)
    })),
    [documents, memoizedDecrypt]
  );
  
  return (
    <div>
      {processedDocs.map(doc => (
        <DocumentItem key={doc.id} document={doc} />
      ))}
    </div>
  );
}
```

### Lazy Loading

```jsx
import { lazy, Suspense } from 'react';

// Lazy load encryption-heavy components
const EncryptionPanel = lazy(() => import('./EncryptionPanel'));

function Dashboard() {
  const [showEncryption, setShowEncryption] = useState(false);
  
  return (
    <div>
      <button onClick={() => setShowEncryption(true)}>
        Show Encryption Panel
      </button>
      
      {showEncryption && (
        <Suspense fallback={<Loading />}>
          <EncryptionPanel />
        </Suspense>
      )}
    </div>
  );
}
```

## Testing

Mock the hooks for testing:

```jsx
import { renderHook } from '@testing-library/react-hooks';
import { createMockClient } from '@neuralock/react/testing';

describe('useNeuralock', () => {
  it('should encrypt and decrypt data', async () => {
    const mockClient = createMockClient();
    
    const wrapper = ({ children }) => (
      <NeuralockProvider client={mockClient}>
        {children}
      </NeuralockProvider>
    );
    
    const { result } = renderHook(() => useNeuralock(), { wrapper });
    
    // Test encryption
    const encrypted = await result.current.encrypt('test', 'id-1');
    expect(encrypted).toBeDefined();
    
    // Test decryption
    const decrypted = await result.current.decrypt(encrypted, 'id-1');
    expect(decrypted).toBe('test');
  });
});
```

## Best Practices

1. **Initialize early**: Initialize Neuralock in your app's root
2. **Handle loading states**: Always show loading indicators
3. **Cache when possible**: Use the built-in caching hooks
4. **Monitor sessions**: Use session hooks to handle expiry
5. **Error boundaries**: Wrap components with error boundaries
6. **Optimize re-renders**: Use memoization for expensive operations

## Next Steps

- View [Code Examples](/neuralock/sdks/code-examples) for complete applications
- Learn about [Server Setup](/neuralock/server-setup) for deployment
- Read the [Security Guide](/neuralock/security) for best practices
- Explore the [JavaScript SDK](/neuralock/sdks/javascript-sdk) for advanced usage