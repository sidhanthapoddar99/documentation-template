---
/**
 * ThemeToggle - Clean, minimal theme toggle button
 */
---

<button
  type="button"
  class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground h-9 w-9"
  aria-label="Toggle theme"
  data-theme-toggle
>
  <!-- Sun icon (light mode) -->
  <svg
    class="h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"
  >
    <circle cx="12" cy="12" r="4"/>
    <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
  </svg>

  <!-- Moon icon (dark mode) -->
  <svg
    class="absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"
  >
    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
  </svg>
</button>

<script>
  function initThemeToggle() {
    const toggles = document.querySelectorAll('[data-theme-toggle]');

    toggles.forEach((toggle) => {
      toggle.addEventListener('click', () => {
        const html = document.documentElement;
        const isDark = html.classList.contains('dark') || html.getAttribute('data-theme') === 'dark';

        if (isDark) {
          html.classList.remove('dark');
          html.removeAttribute('data-theme');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          html.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
        }
      });
    });
  }

  initThemeToggle();
  document.addEventListener('astro:page-load', initThemeToggle);
</script>
