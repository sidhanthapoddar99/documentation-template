---
/**
 * Home Layout - Hero + Features
 */
import Hero from '../../components/hero/default/Hero.astro';
import Features from '../../components/features/default/Features.astro';
import { loadFile } from '@loaders/data';

interface HeroData {
  title: string;
  subtitle?: string;
  cta?: { label: string; href: string };
  secondaryCta?: { label: string; href: string };
}

interface FeatureData {
  title: string;
  description: string;
  icon?: string;
}

interface Props {
  dataPath: string;
}

const { dataPath } = Astro.props;

let pageData: { hero?: HeroData; features?: FeatureData[] } = {};

try {
  const content = await loadFile(dataPath);
  pageData = content.data as typeof pageData;
} catch (error) {
  console.error('Error loading home page data:', error);
}

const hero = pageData.hero;
const features = pageData.features || [];
---

<div class="home">
  {hero && <Hero hero={hero} />}
  {features.length > 0 && <Features features={features} />}
</div>
