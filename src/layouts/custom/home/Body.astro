---
/**
 * Home Body - Just the main content (hero + features)
 */
import { loadFile } from '@loaders/data';
import './styles.css';

interface HeroData {
  title: string;
  subtitle?: string;
  cta?: { label: string; href: string };
  secondaryCta?: { label: string; href: string };
}

interface FeatureData {
  title: string;
  description: string;
  icon?: string;
}

interface Props {
  dataPath: string;
}

const { dataPath } = Astro.props;

let pageData: { hero?: HeroData; features?: FeatureData[] } = {};

try {
  const content = await loadFile(dataPath);
  pageData = content.data as typeof pageData;
} catch (error) {
  console.error('Error loading home page data:', error);
}

const hero = pageData.hero;
const features = pageData.features || [];
---

<div class="home">
  {hero && (
    <section class="hero">
      <div class="hero__container">
        <h1 class="hero__title">{hero.title}</h1>
        {hero.subtitle && <p class="hero__subtitle">{hero.subtitle}</p>}
        <div class="hero__actions">
          {hero.cta && (
            <a href={hero.cta.href} class="hero__cta hero__cta--primary">
              {hero.cta.label}
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12" />
                <polyline points="12 5 19 12 12 19" />
              </svg>
            </a>
          )}
          {hero.secondaryCta && (
            <a href={hero.secondaryCta.href} class="hero__cta hero__cta--secondary">
              {hero.secondaryCta.label}
            </a>
          )}
        </div>
      </div>
    </section>
  )}

  {features.length > 0 && (
    <section class="features">
      <div class="features__container">
        <div class="features__grid">
          {features.map((feature) => (
            <div class="feature-card">
              {feature.icon && <div class="feature-card__icon"><span>{feature.icon}</span></div>}
              <h3 class="feature-card__title">{feature.title}</h3>
              <p class="feature-card__description">{feature.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}
</div>
