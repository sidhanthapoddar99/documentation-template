---
id: smart-contracts-deployment
title: Smart Contracts Deployment
sidebar_label: Deployment
sidebar_position: 2
---

import { Card, CardHeader, CardTitle, CardDescription } from '@site/src/components/Card';
import { CollapsibleCodeBlock, InlineCodeCard } from '@site/src/components/CodeBlock';
import {Tabs} from '@theme/Tabs';
import {TabItem} from '@theme/TabItem';

# Smart Contracts Deployment

Complete deployment guide for NeuraLabs SUI Move contracts on testnet with comprehensive environment setup, contract compilation, deployment, and initialization procedures.

## Prerequisites and Environment Setup

### Operating System Requirements

<div className="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
  <Card>
    <CardHeader>
      <CardTitle>
        <span style={{ display: 'flex', alignItems: 'center' }}><img src="/img/icons/terminal.svg" width="20" height="20" style={{ marginRight: '8px' }} />Linux/Ubuntu</span>
      </CardTitle>
      <CardDescription>
        Recommended for development with native performance
      </CardDescription>
    </CardHeader>
  </Card>

  <Card>
    <CardHeader>
      <CardTitle>
        <span style={{ display: 'flex', alignItems: 'center' }}><img src="/img/icons/terminal.svg" width="20" height="20" style={{ marginRight: '8px' }} />macOS</span>
      </CardTitle>
      <CardDescription>
        Full support with Homebrew package management
      </CardDescription>
    </CardHeader>
  </Card>

  <Card>
    <CardHeader>
      <CardTitle>
        <span style={{ display: 'flex', alignItems: 'center' }}><img src="/img/icons/terminal.svg" width="20" height="20" style={{ marginRight: '8px' }} />Windows WSL2</span>
      </CardTitle>
      <CardDescription>
        Use Windows Subsystem for Linux for optimal compatibility
      </CardDescription>
    </CardHeader>
  </Card>
</div>

### Development Tools Installation

<Tabs>
  <TabItem value="ubuntu" label="Ubuntu/Debian" default>
    ```bash
    # Update system packages
    sudo apt update && sudo apt upgrade -y
    
    # Install essential development tools
    sudo apt install -y curl git build-essential
    
    # Install Node.js and npm
    curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
    sudo apt install -y nodejs
    
    # Install Python 3.12
    sudo apt install -y python3.12 python3.12-pip python3.12-venv
    
    # Verify installations
    node --version
    npm --version
    python3.12 --version
    ```
  </TabItem>
  <TabItem value="macos" label="macOS">
    ```bash
    # Install Homebrew if not already installed
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    
    # Install development tools
    brew install git node python@3.12
    
    # Install Rust
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
    source ~/.zshrc
    
    # Verify installations
    node --version
    python3.12 --version
    rustc --version
    ```
  </TabItem>
  <TabItem value="windows" label="Windows WSL2">
    ```bash
    # First, install WSL2 and Ubuntu from Microsoft Store
    # Then run these commands in WSL2 terminal:
    
    # Update WSL Ubuntu
    sudo apt update && sudo apt upgrade -y
    
    # Install development tools
    sudo apt install -y curl git build-essential
    
    # Install Node.js via Node Version Manager
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
    source ~/.bashrc
    nvm install 18
    nvm use 18
    
    # Install Python 3.12
    sudo apt install -y python3.12 python3.12-pip
    ```
  </TabItem>
</Tabs>

## SUI CLI Installation and Configuration

### Rust and SUI CLI Setup

<CollapsibleCodeBlock
  title="Complete SUI CLI Installation"
  description="Comprehensive setup including Rust installation, dependencies, and SUI CLI compilation"
  language="bash"
  defaultCollapsed={true}
>
{`#!/bin/bash
# Complete SUI CLI Installation Script

echo "üöÄ Starting SUI CLI installation..."

# 1. Install Rust if not already installed
if ! command -v rustc &> /dev/null; then
    echo "üì¶ Installing Rust..."
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
    source ~/.bashrc
    source ~/.cargo/env
else
    echo "‚úÖ Rust already installed"
fi

# 2. Update Rust
echo "üîÑ Updating Rust..."
rustup update

# 3. Install system dependencies
echo "üì¶ Installing system dependencies..."

if [[ "$OSTYPE" == "linux-gnu"* ]]; then
    # Ubuntu/Debian
    sudo apt update
    sudo apt install -y \\
        clang \\
        libclang-dev \\
        llvm-dev \\
        librocksdb-dev \\
        build-essential \\
        pkg-config \\
        openssl \\
        libssl-dev
elif [[ "$OSTYPE" == "darwin"* ]]; then
    # macOS
    if command -v brew &> /dev/null; then
        brew install llvm rocksdb
    else
        echo "‚ö†Ô∏è  Please install Homebrew first"
        exit 1
    fi
fi

# 4. Install SUI CLI from source
echo "üèóÔ∏è  Installing SUI CLI from source..."
cargo install --locked --git https://github.com/MystenLabs/sui.git --branch testnet sui

# Alternative: Install specific version if needed
# cargo install --locked --git https://github.com/MystenLabs/sui.git --tag testnet-v1.47.0 sui

# 5. Verify installation
echo "‚úÖ Verifying SUI CLI installation..."
if command -v sui &> /dev/null; then
    sui --version
    echo "üéâ SUI CLI installed successfully!"
else
    echo "‚ùå SUI CLI installation failed"
    exit 1
fi

# 6. Add cargo bin to PATH if needed
if [[ ":$PATH:" != *":$HOME/.cargo/bin:"* ]]; then
    echo "üìù Adding cargo bin to PATH..."
    echo 'export PATH="$HOME/.cargo/bin:$PATH"' >> ~/.bashrc
    echo "üîÑ Please run: source ~/.bashrc"
fi

echo "‚ú® SUI CLI installation completed!"
`}
</CollapsibleCodeBlock>

### Account Creation and Network Configuration

<Tabs>
  <TabItem value="setup" label="Initial Setup" default>
    ```bash
    # Initialize SUI configuration
    sui client
    
    # This will prompt you to create a new wallet
    # Choose option 1: "Create a new wallet"
    # IMPORTANT: Save your recovery phrase securely!
    ```
  </TabItem>
  <TabItem value="network" label="Network Configuration">
    ```bash
    # Add testnet environment
    sui client new-env --alias testnet --rpc https://fullnode.testnet.sui.io:443
    
    # Switch to testnet
    sui client switch --env testnet
    
    # Verify current environment
    sui client envs
    
    # Check active address
    sui client active-address
    ```
  </TabItem>
  <TabItem value="funding" label="Account Funding">
    ```bash
    # Get your address
    MY_ADDRESS=$(sui client active-address)
    echo "Your address: $MY_ADDRESS"
    
    # Request testnet tokens from faucet
    sui client faucet --address $MY_ADDRESS
    
    # Alternative: Use curl for faucet
    curl --location --request POST 'https://faucet.testnet.sui.io/gas' \\
    --header 'Content-Type: application/json' \\
    --data-raw "{
        \"FixedAmountRequest\": {
            \"recipient\": \"$MY_ADDRESS\"
        }
    }"
    
    # Check balance
    sui client gas
    sui client balance
    ```
  </TabItem>
</Tabs>

<div className="card padding--md mt-4" style={{ borderLeft: '4px solid #ff9800' }}>
  <h3><span style={{ display: 'flex', alignItems: 'center' }}><img src="/img/icons/warning.svg" width="20" height="20" style={{ marginRight: '8px' }} />Important Security Note</span></h3>
  <p>
    <strong>Save your recovery phrase securely!</strong> This 12-word phrase is the only way to recover your wallet. 
    Store it in a secure location and never share it with anyone. For testnet, you can use a simple phrase, 
    but for mainnet, use a hardware wallet or secure key management system.
  </p>
</div>

## Project Structure and Setup

### Directory Structure Creation

<InlineCodeCard
  title="Project Structure Setup"
  description="Create the complete project structure for NeuraLabs smart contracts"
  language="bash"
  code={`# Create main project directory
mkdir neuralabs-sui-contracts
cd neuralabs-sui-contracts

# Create directory structure
mkdir -p {sources,tests,scripts,docs,build}

# Create configuration files
touch Move.toml .gitignore README.md

# Create source files structure
mkdir -p sources/{nft,access,storage,utils}

# Verify structure
tree . || ls -la

# Expected structure:
# neuralabs-sui-contracts/
# ‚îú‚îÄ‚îÄ Move.toml
# ‚îú‚îÄ‚îÄ sources/
# ‚îÇ   ‚îú‚îÄ‚îÄ nft.move
# ‚îÇ   ‚îú‚îÄ‚îÄ access.move
# ‚îÇ   ‚îú‚îÄ‚îÄ storage.move
# ‚îÇ   ‚îî‚îÄ‚îÄ utils.move
# ‚îú‚îÄ‚îÄ tests/
# ‚îú‚îÄ‚îÄ scripts/
# ‚îú‚îÄ‚îÄ docs/
# ‚îî‚îÄ‚îÄ build/`}
/>

### Move.toml Configuration

<CollapsibleCodeBlock
  title="Complete Move.toml Configuration"
  description="Comprehensive Move.toml with all dependencies and configurations for NeuraLabs contracts"
  language="toml"
  defaultCollapsed={true}
>
{`[package]
name = "neuranft"
version = "1.0.0"
edition = "2024.beta"
authors = ["NeuraLabs Team"]
license = "MIT"
published-at = "0x926de4be791b165822a8a213540c0606bb0d52450e5f8b6531097d9cd2c4dc64"

[dependencies]
Sui = { git = "https://github.com/MystenLabs/sui.git", subdir = "crates/sui-framework/packages/sui-framework", rev = "framework/testnet" }

[addresses]
neuranft = "0x0"  # Will be replaced with deployer address
sui = "0x2"

[dev-dependencies]

[dev-addresses]
# Test addresses for development
test_owner = "0x1"
test_user = "0x2"
test_collection = "0x3"

# Build configuration
[build]
# Optimize for gas efficiency
optimization-level = 3
# Include debug information for testing
debug = true

# Deployment configuration
[deployment]
# Testnet configuration
testnet = { chain-id = "testnet", gas-budget = 100000000 }
# Mainnet configuration (for future use)
mainnet = { chain-id = "mainnet", gas-budget = 200000000 }
`}
</CollapsibleCodeBlock>

### Environment Configuration Files

<Tabs>
  <TabItem value="gitignore" label=".gitignore" default>
    ```gitignore
    # Sui build artifacts
    build/
    .sui/
    
    # IDE files
    .vscode/
    .idea/
    *.swp
    *.swo
    
    # OS files
    .DS_Store
    Thumbs.db
    
    # Environment files
    .env
    .env.local
    .env.production
    
    # Node modules (for frontend integration)
    node_modules/
    
    # Python
    __pycache__/
    *.pyc
    *.pyo
    *.pyd
    .Python
    env/
    venv/
    .venv/
    
    # Logs
    *.log
    logs/
    
    # Test artifacts
    test-results/
    coverage/
    
    # Deployment artifacts
    deployment-*.json
    gas-report.json
    
    # Temporary files
    *.tmp
    *.temp
    .cache/
    ```
  </TabItem>
  <TabItem value="env" label="Environment Template">
    ```bash
    # .env.template - Copy to .env and fill in values
    
    # Deployment Configuration
    DEPLOYER_ADDRESS=0x...
    DEPLOYER_PRIVATE_KEY=0x...  # Never commit real private keys!
    
    # Network Configuration
    SUI_NETWORK=testnet
    SUI_RPC_URL=https://fullnode.testnet.sui.io:443
    
    # Contract Configuration
    PACKAGE_ID=0x926de4be791b165822a8a213540c0606bb0d52450e5f8b6531097d9cd2c4dc64
    COLLECTION_ID=0x...  # Set after deployment
    
    # Gas Configuration
    GAS_BUDGET=100000000
    MAX_GAS_PRICE=1000
    
    # Seal Configuration
    SEAL_PACKAGE_ID=0x62c79dfeb0a2ca8c308a56bde530ccf3846535e1623949d45c90d23128afff52
    MYSTEN_KEY_SERVER_1=https://seal-key-server-testnet-1.mystenlabs.com
    MYSTEN_KEY_SERVER_2=https://seal-key-server-testnet-2.mystenlabs.com
    
    # Walrus Configuration
    WALRUS_PUBLISHER_URL=https://publisher.walrus-testnet.walrus.space
    WALRUS_AGGREGATOR_URL=https://aggregator.walrus-testnet.walrus.space
    
    # Testing Configuration
    TEST_TIMEOUT=30000
    TEST_PARALLEL=true
    ```
  </TabItem>
</Tabs>

## Contract Compilation and Build

### Pre-build Validation

<InlineCodeCard
  title="Pre-build Validation Script"
  description="Validate environment and configuration before building contracts"
  language="bash"
  code={`#!/bin/bash
# pre-build-validation.sh

echo "üîç Validating build environment..."

# Check SUI CLI
if ! command -v sui &> /dev/null; then
    echo "‚ùå SUI CLI not found. Please install SUI CLI first."
    exit 1
fi

echo "‚úÖ SUI CLI version: $(sui --version)"

# Check network connection
if ! sui client envs | grep -q "testnet"; then
    echo "‚ùå Testnet environment not configured"
    exit 1
fi

echo "‚úÖ Network configuration valid"

# Check account balance
BALANCE=$(sui client gas | grep -o '[0-9]*' | head -1)
if [ "$BALANCE" -lt 100000000 ]; then
    echo "‚ö†Ô∏è  Low balance: $BALANCE MIST. Consider getting more tokens from faucet."
fi

echo "‚úÖ Account balance: $BALANCE MIST"

# Validate Move.toml
if ! grep -q "neuranft" Move.toml; then
    echo "‚ùå Invalid Move.toml configuration"
    exit 1
fi

echo "‚úÖ Move.toml configuration valid"

# Update Move.toml with current address
CURRENT_ADDRESS=$(sui client active-address)
sed -i "s/neuranft = \"0x0\"/neuranft = \"$CURRENT_ADDRESS\"/" Move.toml

echo "‚úÖ Updated Move.toml with address: $CURRENT_ADDRESS"
echo "üéâ Pre-build validation completed successfully!"
`}
/>

### Contract Compilation

<Tabs>
  <TabItem value="basic" label="Basic Build" default>
    ```bash
    # Navigate to contract directory
    cd neuralabs-sui-contracts
    
    # Update Move.toml with your address
    CURRENT_ADDRESS=$(sui client active-address)
    sed -i "s/neuranft = \"0x0\"/neuranft = \"$CURRENT_ADDRESS\"/" Move.toml
    
    # Build the contract
    sui move build
    
    # Check build output
    echo "Build status: $?"
    ls -la build/
    ```
  </TabItem>
  <TabItem value="advanced" label="Advanced Build Options">
    ```bash
    # Build with verbose output
    sui move build --verbose
    
    # Build with specific profile
    sui move build --dev
    
    # Build and run tests
    sui move build && sui move test
    
    # Build with optimization
    sui move build --release
    
    # Check for warnings and errors
    sui move build 2>&1 | tee build.log
    ```
  </TabItem>
  <TabItem value="validation" label="Build Validation">
    ```bash
    # Validate build artifacts
    if [ -d "build/neuranft" ]; then
        echo "‚úÖ Build successful"
        ls -la build/neuranft/
        
        # Check bytecode files
        find build/ -name "*.mv" | while read file; do
            echo "üì¶ Bytecode: $file ($(stat -f%z "$file" 2>/dev/null || stat -c%s "$file") bytes)"
        done
    else
        echo "‚ùå Build failed"
        exit 1
    fi
    
    # Verify contract modules
    echo "üìã Contract modules:"
    grep -r "module " sources/ | sed 's/.*module /- /' | sed 's/ {.*//'
    ```
  </TabItem>
</Tabs>

## Contract Deployment

### Deployment Process

<CollapsibleCodeBlock
  title="Complete Deployment Script"
  description="Comprehensive deployment script with error handling, validation, and post-deployment setup"
  language="bash"
  defaultCollapsed={true}
>
{`#!/bin/bash
# deploy-contracts.sh - Complete deployment script

set -e  # Exit on any error

echo "üöÄ Starting NeuraLabs contract deployment..."

# Configuration
GAS_BUDGET=100000000
DEPLOYMENT_LOG="deployment_$(date +%Y%m%d_%H%M%S).log"

# Helper functions
log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$DEPLOYMENT_LOG"
}

error_exit() {
    log "‚ùå ERROR: $1"
    exit 1
}

# Pre-deployment checks
log "üîç Running pre-deployment checks..."

# Check balance
BALANCE=$(sui client gas | grep -o '[0-9]*' | head -1)
if [ "$BALANCE" -lt "$GAS_BUDGET" ]; then
    error_exit "Insufficient balance: $BALANCE MIST. Need at least $GAS_BUDGET MIST."
fi

log "‚úÖ Balance check passed: $BALANCE MIST"

# Check build
if [ ! -d "build/neuranft" ]; then
    log "üì¶ Building contracts..."
    sui move build || error_exit "Build failed"
fi

log "‚úÖ Contracts built successfully"

# Deploy contracts
log "üöÄ Deploying contracts to testnet..."
log "Gas budget: $GAS_BUDGET MIST"

DEPLOY_OUTPUT=$(sui client publish --gas-budget "$GAS_BUDGET" --json 2>&1)
DEPLOY_STATUS=$?

# Save deployment output
echo "$DEPLOY_OUTPUT" > "deploy_output_$(date +%Y%m%d_%H%M%S).json"

if [ $DEPLOY_STATUS -ne 0 ]; then
    error_exit "Deployment failed: $DEPLOY_OUTPUT"
fi

# Extract deployment information
PACKAGE_ID=$(echo "$DEPLOY_OUTPUT" | jq -r '.objectChanges[] | select(.type == "published") | .packageId')
TRANSACTION_DIGEST=$(echo "$DEPLOY_OUTPUT" | jq -r '.digest')

if [ "$PACKAGE_ID" = "null" ] || [ -z "$PACKAGE_ID" ]; then
    error_exit "Failed to extract package ID from deployment output"
fi

log "‚úÖ Deployment successful!"
log "üì¶ Package ID: $PACKAGE_ID"
log "üîó Transaction: $TRANSACTION_DIGEST"

# Save deployment information
cat > deployment_info.json << EOF
{
  "package_id": "$PACKAGE_ID",
  "transaction_digest": "$TRANSACTION_DIGEST",
  "deployer_address": "$(sui client active-address)",
  "deployment_time": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
  "network": "testnet",
  "gas_used": $(echo "$DEPLOY_OUTPUT" | jq '.effects.gasUsed.computationCost + .effects.gasUsed.storageCost'),
  "sui_version": "$(sui --version)"
}
EOF

log "üíæ Deployment info saved to deployment_info.json"

# Verify deployment
log "üîç Verifying deployment..."

PACKAGE_INFO=$(sui client object "$PACKAGE_ID" --json 2>/dev/null)
if [ $? -eq 0 ]; then
    log "‚úÖ Package verification successful"
else
    log "‚ö†Ô∏è  Package verification failed - this is normal for newly deployed packages"
fi

# Initialize contracts
log "üîß Initializing contracts..."

# Create collection
log "üìù Creating NFT collection..."
COLLECTION_TX=$(sui client call \\
    --package "$PACKAGE_ID" \\
    --module nft \\
    --function create_collection \\
    --gas-budget 10000000 \\
    --json)

COLLECTION_ID=$(echo "$COLLECTION_TX" | jq -r '.objectChanges[] | select(.type == "created" and (.objectType | contains("Collection"))) | .objectId')

if [ "$COLLECTION_ID" != "null" ] && [ -n "$COLLECTION_ID" ]; then
    log "‚úÖ Collection created: $COLLECTION_ID"
    
    # Update deployment info
    jq --arg collection_id "$COLLECTION_ID" '.collection_id = $collection_id' deployment_info.json > temp.json && mv temp.json deployment_info.json
else
    log "‚ö†Ô∏è  Collection creation failed or ID not found"
fi

# Create environment file
cat > .env.deployment << EOF
# NeuraLabs Contract Deployment Configuration
# Generated on $(date)

# Contract addresses
PACKAGE_ID=$PACKAGE_ID
COLLECTION_ID=$COLLECTION_ID

# Network configuration
SUI_NETWORK=testnet
SUI_RPC_URL=https://fullnode.testnet.sui.io:443

# Deployment info
DEPLOYER_ADDRESS=$(sui client active-address)
DEPLOYMENT_DATE=$(date -u +%Y-%m-%d)
TRANSACTION_DIGEST=$TRANSACTION_DIGEST

# Seal integration
SEAL_PACKAGE_ID=0x62c79dfeb0a2ca8c308a56bde530ccf3846535e1623949d45c90d23128afff52
MYSTEN_KEY_SERVER_1_ID=0x13a86a87ab1bf3a2e81b3c13b2e7a3b0db8b3c4d5e6f708192a3b4c5d6e7f809
MYSTEN_KEY_SERVER_2_ID=0x23b97b98bc2cf4a3f92c4d14c3f8b5c6d7e8f90a1b2c3d4e5f60718293a4b5c6

# Walrus storage
WALRUS_PUBLISHER_URL=https://publisher.walrus-testnet.walrus.space
WALRUS_AGGREGATOR_URL=https://aggregator.walrus-testnet.walrus.space
EOF

log "üíæ Environment configuration saved to .env.deployment"

# Generate deployment summary
log "üìä Generating deployment summary..."

cat << EOF

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë               DEPLOYMENT SUMMARY                 ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë Package ID: $PACKAGE_ID
‚ïë Collection: $COLLECTION_ID
‚ïë Network:    testnet
‚ïë Deployer:   $(sui client active-address)
‚ïë Time:       $(date)
‚ïë Gas Used:   $(echo "$DEPLOY_OUTPUT" | jq '.effects.gasUsed.computationCost + .effects.gasUsed.storageCost') MIST
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üéâ Deployment completed successfully!

Next steps:
1. Update your frontend configuration with the new Package ID
2. Run integration tests: cd scripts && python test_integration.py
3. Test the deployed contracts with the test app
4. Set up monitoring and alerts

Useful commands:
- View package: sui client object $PACKAGE_ID
- View collection: sui client object $COLLECTION_ID
- Check transaction: sui client transaction $TRANSACTION_DIGEST

EOF

log "üéâ Deployment process completed successfully!"
`}
</CollapsibleCodeBlock>

### Post-Deployment Verification

<Tabs>
  <TabItem value="validation" label="Contract Validation" default>
    ```bash
    # Verify package exists and is accessible
    PACKAGE_ID="0x926de4be791b165822a8a213540c0606bb0d52450e5f8b6531097d9cd2c4dc64"
    
    # Check package information
    sui client object $PACKAGE_ID --json | jq '.data'
    
    # Verify modules are available
    sui client package $PACKAGE_ID
    
    # Check package metadata
    sui client object $PACKAGE_ID --json | jq '{
      objectId: .data.objectId,
      version: .data.version,
      digest: .data.digest,
      type: .data.type
    }'
    ```
  </TabItem>
  <TabItem value="testing" label="Functionality Testing">
    ```bash
    # Test NFT creation (requires collection ID)
    COLLECTION_ID="YOUR_COLLECTION_ID"
    
    sui client call \
      --package $PACKAGE_ID \
      --module nft \
      --function create_nft \
      --args $COLLECTION_ID "Test NFT" "Testing deployment" 6 0x6 \
      --gas-budget 10000000
    
    # Test access control
    # (Add more specific tests based on your contract functions)
    
    # Test Seal integration
    sui client call \
      --package $PACKAGE_ID \
      --module nft \
      --function seal_approve \
      --args "[1,2,3,4,5,6,7,8]" $COLLECTION_ID \
      --gas-budget 5000000
    ```
  </TabItem>
  <TabItem value="monitoring" label="Health Monitoring">
    ```bash
    # Create monitoring script
    cat > monitor_deployment.sh << 'EOF'
    #!/bin/bash
    
    PACKAGE_ID="0x926de4be791b165822a8a213540c0606bb0d52450e5f8b6531097d9cd2c4dc64"
    
    echo "üîç Monitoring contract health..."
    
    # Check if package still exists
    if sui client object $PACKAGE_ID &>/dev/null; then
        echo "‚úÖ Package is accessible"
    else
        echo "‚ùå Package not found or inaccessible"
        exit 1
    fi
    
    # Check recent events
    echo "üìä Recent events:"
    sui client events --package $PACKAGE_ID --limit 5
    
    # Check transaction count (approximate)
    echo "üî¢ Checking activity..."
    sui client events --package $PACKAGE_ID --limit 100 | wc -l
    
    echo "‚úÖ Health check completed"
    EOF
    
    chmod +x monitor_deployment.sh
    ./monitor_deployment.sh
    ```
  </TabItem>
</Tabs>

## Integration Configuration

### Frontend Configuration

<InlineCodeCard
  title="Frontend Environment Configuration"
  description="React application configuration for contract integration"
  language="javascript"
  code={`// frontend/.env.production
REACT_APP_SUI_NETWORK=testnet
REACT_APP_PACKAGE_ID=0x926de4be791b165822a8a213540c0606bb0d52450e5f8b6531097d9cd2c4dc64
REACT_APP_COLLECTION_ID=YOUR_COLLECTION_ID
REACT_APP_SUI_RPC_URL=https://fullnode.testnet.sui.io:443

// Seal configuration
REACT_APP_SEAL_PACKAGE_ID=0x62c79dfeb0a2ca8c308a56bde530ccf3846535e1623949d45c90d23128afff52
REACT_APP_MYSTEN_KEY_SERVER_1=https://seal-key-server-testnet-1.mystenlabs.com
REACT_APP_MYSTEN_KEY_SERVER_2=https://seal-key-server-testnet-2.mystenlabs.com

// Walrus configuration
REACT_APP_WALRUS_PUBLISHER_URL=https://publisher.walrus-testnet.walrus.space
REACT_APP_WALRUS_AGGREGATOR_URL=https://aggregator.walrus-testnet.walrus.space

// src/config/sui.config.js
export const SUI_CONFIG = {
  PACKAGE_ID: process.env.REACT_APP_PACKAGE_ID,
  COLLECTION_ID: process.env.REACT_APP_COLLECTION_ID,
  NETWORK: process.env.REACT_APP_SUI_NETWORK || 'testnet',
  RPC_URL: process.env.REACT_APP_SUI_RPC_URL,
  
  SEAL: {
    PACKAGE_ID: process.env.REACT_APP_SEAL_PACKAGE_ID,
    KEY_SERVERS: [
      {
        name: 'mysten-testnet-1',
        url: process.env.REACT_APP_MYSTEN_KEY_SERVER_1,
        objectId: '0x13a86a87ab1bf3a2e81b3c13b2e7a3b0db8b3c4d5e6f708192a3b4c5d6e7f809'
      },
      {
        name: 'mysten-testnet-2',
        url: process.env.REACT_APP_MYSTEN_KEY_SERVER_2,
        objectId: '0x23b97b98bc2cf4a3f92c4d14c3f8b5c6d7e8f90a1b2c3d4e5f60718293a4b5c6'
      }
    ],
    THRESHOLD: 1 // 1-out-of-2 for testing
  },
  
  WALRUS: {
    PUBLISHER_URL: process.env.REACT_APP_WALRUS_PUBLISHER_URL,
    AGGREGATOR_URL: process.env.REACT_APP_WALRUS_AGGREGATOR_URL
  }
};`}
/>

### Backend Configuration

<InlineCodeCard
  title="Backend Service Configuration"
  description="Python backend configuration for contract interaction"
  language="python"
  code={`# neuralabs-backend/.env
SUI_NETWORK=testnet
PACKAGE_ID=0x926de4be791b165822a8a213540c0606bb0d52450e5f8b6531097d9cd2c4dc64
COLLECTION_ID=YOUR_COLLECTION_ID
SUI_RPC_URL=https://fullnode.testnet.sui.io:443

# Seal configuration
SEAL_PACKAGE_ID=0x62c79dfeb0a2ca8c308a56bde530ccf3846535e1623949d45c90d23128afff52
MYSTEN_KEY_SERVER_1=https://seal-key-server-testnet-1.mystenlabs.com
MYSTEN_KEY_SERVER_2=https://seal-key-server-testnet-2.mystenlabs.com

# Walrus configuration
WALRUS_PUBLISHER_URL=https://publisher.walrus-testnet.walrus.space
WALRUS_AGGREGATOR_URL=https://aggregator.walrus-testnet.walrus.space

# Database configuration
DATABASE_URL=postgresql://user:password@localhost:5432/neuralabs
REDIS_URL=redis://localhost:6379

# JWT configuration
JWT_SECRET=your-secret-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# config.py
import os
from typing import Dict, Any

class Config:
    # SUI Configuration
    SUI_NETWORK = os.getenv('SUI_NETWORK', 'testnet')
    PACKAGE_ID = os.getenv('PACKAGE_ID')
    COLLECTION_ID = os.getenv('COLLECTION_ID')
    SUI_RPC_URL = os.getenv('SUI_RPC_URL')
    
    # Seal Configuration
    SEAL_CONFIG = {
        'package_id': os.getenv('SEAL_PACKAGE_ID'),
        'key_servers': [
            {
                'name': 'mysten-testnet-1',
                'url': os.getenv('MYSTEN_KEY_SERVER_1'),
                'object_id': '0x13a86a87ab1bf3a2e81b3c13b2e7a3b0db8b3c4d5e6f708192a3b4c5d6e7f809'
            },
            {
                'name': 'mysten-testnet-2', 
                'url': os.getenv('MYSTEN_KEY_SERVER_2'),
                'object_id': '0x23b97b98bc2cf4a3f92c4d14c3f8b5c6d7e8f90a1b2c3d4e5f60718293a4b5c6'
            }
        ],
        'threshold': 1
    }
    
    # Walrus Configuration
    WALRUS_CONFIG = {
        'publisher_url': os.getenv('WALRUS_PUBLISHER_URL'),
        'aggregator_url': os.getenv('WALRUS_AGGREGATOR_URL')
    }
    
    @classmethod
    def validate(cls) -> bool:
        """Validate required configuration"""
        required_vars = [
            'PACKAGE_ID', 'SUI_RPC_URL', 'DATABASE_URL', 'REDIS_URL'
        ]
        
        missing = [var for var in required_vars if not getattr(cls, var)]
        
        if missing:
            raise ValueError(f"Missing required environment variables: {missing}")
        
        return True`}
/>

## Troubleshooting and Common Issues

### Deployment Issues

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
  <Card>
    <CardHeader>
      <CardTitle>
        <span style={{ display: 'flex', alignItems: 'center' }}><img src="/img/icons/error.svg" width="20" height="20" style={{ marginRight: '8px' }} />Insufficient Gas</span>
      </CardTitle>
      <CardDescription>
        <strong>Error:</strong> Transaction failed due to insufficient gas
        <br />
        <strong>Solution:</strong> Increase gas budget to 100,000,000 MIST or higher
      </CardDescription>
    </CardHeader>
  </Card>

  <Card>
    <CardHeader>
      <CardTitle>
        <span style={{ display: 'flex', alignItems: 'center' }}><img src="/img/icons/error.svg" width="20" height="20" style={{ marginRight: '8px' }} />Build Failures</span>
      </CardTitle>
      <CardDescription>
        <strong>Error:</strong> Move compilation errors
        <br />
        <strong>Solution:</strong> Check Move.toml address configuration and dependency versions
      </CardDescription>
    </CardHeader>
  </Card>

  <Card>
    <CardHeader>
      <CardTitle>
        <span style={{ display: 'flex', alignItems: 'center' }}><img src="/img/icons/warning.svg" width="20" height="20" style={{ marginRight: '8px' }} />Network Issues</span>
      </CardTitle>
      <CardDescription>
        <strong>Error:</strong> Connection to testnet failed
        <br />
        <strong>Solution:</strong> Verify network configuration and try alternative RPC endpoints
      </CardDescription>
    </CardHeader>
  </Card>

  <Card>
    <CardHeader>
      <CardTitle>
        <span style={{ display: 'flex', alignItems: 'center' }}><img src="/img/icons/info.svg" width="20" height="20" style={{ marginRight: '8px' }} />Address Conflicts</span>
      </CardTitle>
      <CardDescription>
        <strong>Error:</strong> Package address mismatch
        <br />
        <strong>Solution:</strong> Update Move.toml with correct deployer address
      </CardDescription>
    </CardHeader>
  </Card>
</div>

### Debug Commands

<CollapsibleCodeBlock
  title="Comprehensive Debug Commands"
  description="Collection of debug commands for troubleshooting deployment issues"
  language="bash"
  defaultCollapsed={true}
>
{`#!/bin/bash
# debug-deployment.sh - Debug and troubleshooting commands

echo "üîç Starting deployment diagnostics..."

# 1. Environment Check
echo "=== ENVIRONMENT CHECK ==="
echo "SUI CLI Version: $(sui --version)"
echo "Current Network: $(sui client envs | grep '*' | awk '{print $2}')"
echo "Active Address: $(sui client active-address)"
echo "Current Balance: $(sui client balance)"

# 2. Network Connectivity
echo "=== NETWORK CONNECTIVITY ==="
if curl -s https://fullnode.testnet.sui.io:443 > /dev/null; then
    echo "‚úÖ Testnet RPC accessible"
else
    echo "‚ùå Testnet RPC not accessible"
fi

# 3. Build Diagnostics
echo "=== BUILD DIAGNOSTICS ==="
if [ -f "Move.toml" ]; then
    echo "‚úÖ Move.toml found"
    echo "Package name: $(grep -E '^name' Move.toml | cut -d'"' -f2)"
    echo "Address mapping: $(grep -E '^neuranft' Move.toml)"
else
    echo "‚ùå Move.toml not found"
fi

if [ -d "sources" ]; then
    echo "‚úÖ Sources directory found"
    echo "Source files: $(ls sources/*.move 2>/dev/null | wc -l)"
    ls -la sources/
else
    echo "‚ùå Sources directory not found"
fi

# 4. Build Test
echo "=== BUILD TEST ==="
if sui move build --dry-run; then
    echo "‚úÖ Build test passed"
else
    echo "‚ùå Build test failed"
    echo "Common issues:"
    echo "  - Check Move.toml address configuration"
    echo "  - Verify source file syntax"
    echo "  - Update Sui framework version"
fi

# 5. Gas Estimation
echo "=== GAS ESTIMATION ==="
CURRENT_BALANCE=$(sui client gas | grep -o '[0-9]*' | head -1)
RECOMMENDED_GAS=100000000

echo "Current balance: $CURRENT_BALANCE MIST"
echo "Recommended gas: $RECOMMENDED_GAS MIST"

if [ "$CURRENT_BALANCE" -gt "$RECOMMENDED_GAS" ]; then
    echo "‚úÖ Sufficient balance for deployment"
else
    echo "‚ö†Ô∏è  Low balance. Consider requesting more tokens:"
    echo "  sui client faucet --address $(sui client active-address)"
fi

# 6. Previous Deployments
echo "=== PREVIOUS DEPLOYMENTS ==="
if [ -f "deployment_info.json" ]; then
    echo "‚úÖ Previous deployment found:"
    cat deployment_info.json | jq '{package_id, deployment_time, gas_used}'
else
    echo "‚ÑπÔ∏è  No previous deployment info found"
fi

# 7. Contract Validation
if [ -n "$1" ]; then
    PACKAGE_ID="$1"
    echo "=== CONTRACT VALIDATION ==="
    echo "Checking package: $PACKAGE_ID"
    
    if sui client object "$PACKAGE_ID" &>/dev/null; then
        echo "‚úÖ Package accessible"
        echo "Package info:"
        sui client object "$PACKAGE_ID" --json | jq '{
          objectId: .data.objectId,
          version: .data.version,
          type: .data.type
        }'
    else
        echo "‚ùå Package not accessible"
    fi
fi

# 8. Recommendations
echo "=== RECOMMENDATIONS ==="
echo "1. Ensure sufficient gas balance (>100M MIST)"
echo "2. Verify Move.toml address matches deployer"
echo "3. Test build before deployment"
echo "4. Use gas budget of 100,000,000 for initial deployment"
echo "5. Save deployment info for reference"

echo "üîç Diagnostics completed!"
`}
</CollapsibleCodeBlock>

## Next Steps

After successful deployment, proceed with:

1. **[Testing Guide](./testing)** - Run comprehensive tests on deployed contracts
2. **[Integration Setup](./integration)** - Configure frontend and backend integration
3. **[Seal Configuration](../encryption/seal)** - Set up threshold encryption
4. **[Walrus Integration](../storage/walrus)** - Configure decentralized storage
5. **[Monitoring Setup](./monitoring)** - Implement health monitoring and alerts

<div className="card padding--md mt-4" style={{ borderLeft: '4px solid #4caf50' }}>
  <h3><span style={{ display: 'flex', alignItems: 'center' }}><img src="/img/icons/success.svg" width="20" height="20" style={{ marginRight: '8px' }} />Deployment Complete!</span></h3>
  <p>
    Your NeuraLabs smart contracts are now deployed and ready for integration. 
    The deployed package ID is: <code>0x926de4be791b165822a8a213540c0606bb0d52450e5f8b6531097d9cd2c4dc64</code>
  </p>
  <p>
    Use this Package ID in your frontend and backend configurations to interact with the deployed contracts.
  </p>
</div>